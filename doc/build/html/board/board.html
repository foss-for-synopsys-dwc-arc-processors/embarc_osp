

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Boards &mdash; embARC OSP Project Documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ARC Software Development Platform" href="axs.html" />
    <link rel="prev" title="PWM_TIMER HAL" href="../device/pwm_timer.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> embARC
          

          
          </a>

          
            
            
              <div class="version">
                2019.06
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arc/arc.html">ARC Processors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../device/device.html">Devices</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Boards</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-board-initialization-process">Common Board Initialization Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supported-boards">Supported Boards</a><ul>
<li class="toctree-l3"><a class="reference internal" href="axs.html">ARC Software Development Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="emsk.html">ARC EM Starter Kit</a></li>
<li class="toctree-l3"><a class="reference internal" href="emsdp.html">ARC EM Software Development Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="hsdk.html">ARC HS Development Kit</a></li>
<li class="toctree-l3"><a class="reference internal" href="iotdk.html">ARC IoT Development Kit</a></li>
<li class="toctree-l3"><a class="reference internal" href="nsim.html">Virtual Board based on ARC nSIM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#board-resource-unified-definitions">Board Resource Unified Definitions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../os/os.html">Operating Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../middleware/middleware.html">Middleware Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lib/library.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../example/example.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/developer_guides.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">Usage Guide FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/contribute.html">Contribute to embARC OSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bsp/bsp.html">embARC BSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/license.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">embARC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Boards</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="boards">
<span id="board-bsp"></span><h1>Boards<a class="headerlink" href="#boards" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The <strong>Board Support Package (BSP) Layer</strong> provides support for different
boards based on DesignWare® ARC® processors. The layer contains the following functions:</p>
<ul class="simple">
<li><p><strong>Drivers instantiation</strong>   In embARC OSP, an object-oriented design is applied
for device drivers. The peripheral driver implementations are similar to the
definition of class in the device abstraction layer. So the peripheral drivers
should be instantiated for every board.   For example, <code class="docutils literal notranslate"><span class="pre">dw_gpio_obj.c</span></code> /
<code class="docutils literal notranslate"><span class="pre">dw_gpio_obj.h</span></code> is the instantiation of the DesignWare GPIO driver
implementation in device abstraction layer, which contains the information of
register address, interrupt number, etc.</p></li>
<li><p><strong>Common board initialization process</strong> A standard bootup process is
defined for each board. The entry of this process is <code class="docutils literal notranslate"><span class="pre">board_main</span></code> defined
in <code class="docutils literal notranslate"><span class="pre">board/board.c</span></code>, it will cover board initialization, os environment
setup, fatfs and ntshell initialization, finally it will enter to <code class="docutils literal notranslate"><span class="pre">main</span></code>
function if required.</p></li>
<li><p><strong>Board resource unified definition</strong>  Most boards share common peripherals.
Unified definitions are provided such as UART used to print messages, SD card
interface, buttons, LEDs.</p></li>
<li><p><strong>Linker script for boards</strong> Linker script is auto-generated from
template using the ICCM/DCCM and DDR memory information. embARC OSP provides templates
for both ARC GNU and MetaWare toolchains, located in <code class="docutils literal notranslate"><span class="pre">board</span></code> folder, called
<code class="docutils literal notranslate"><span class="pre">linker_template_gnu.ld</span></code> and <code class="docutils literal notranslate"><span class="pre">linker_template_mw.ld</span></code>.</p></li>
</ul>
</div>
<div class="section" id="common-board-initialization-process">
<h2>Common Board Initialization Process<a class="headerlink" href="#common-board-initialization-process" title="Permalink to this headline">¶</a></h2>
<p>The common <code class="docutils literal notranslate"><span class="pre">board_main</span></code> function in <code class="docutils literal notranslate"><span class="pre">board.c</span></code> will do the following operations:</p>
<ul class="simple">
<li><p>Board initialization steps - defined in <code class="docutils literal notranslate"><span class="pre">board_init</span></code> function.</p>
<ul>
<li><p>Install required device driver objects, such as UART/SPI/IIC device objects.</p></li>
<li><p>Clear and disable all interrupts.</p></li>
<li><p>Initialize 1 ms timer interrupt.</p></li>
<li><p>Initialize some peripherals if used.</p></li>
<li><p>Initialize other required board resources such as mux controller.</p></li>
</ul>
</li>
<li><p>xprintf library setup to provide printf functionality</p></li>
<li><p>Initialization of FatFs if FatFs middleware is selected</p></li>
<li><p>Initialization of FreeRTOS tasks if defined</p></li>
<li><p>Go to <code class="docutils literal notranslate"><span class="pre">main</span></code> function</p></li>
</ul>
</div>
<div class="section" id="supported-boards">
<h2>Supported Boards<a class="headerlink" href="#supported-boards" title="Permalink to this headline">¶</a></h2>
<p>The BSP Layer currently supports the following boards.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="axs.html">ARC Software Development Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="emsk.html">ARC EM Starter Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="emsdp.html">ARC EM Software Development Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="hsdk.html">ARC HS Development Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="iotdk.html">ARC IoT Development Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="nsim.html">Virtual Board based on ARC nSIM</a></li>
</ul>
</div>
<ul class="simple">
<li><p>AXS board support can be found in <code class="docutils literal notranslate"><span class="pre">board/axs</span></code>, detailed in ARC AXS Software
Development Platform (AXS). It includes the following sub-folders:</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">common</span></code>: AXS board initialization functions and 1 ms interrupt timer function</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">drivers</span></code>: Various peripheral drivers for various examples</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">configs</span></code>: Different versions of axs, and various core configurations for different version</p></li>
</ul>
</li>
<li><p>EM Starter Kit (EMSK) support can be found in <code class="docutils literal notranslate"><span class="pre">board/emsk</span></code>. It includes the following sub-folders.</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">common</span></code>: EMSK board initialization functions and 1 ms interrupt timer function</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">drivers</span></code>: Various peripheral drivers for various examples</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">configs</span></code>: Different versions of emsk, and various core configurations for different version</p></li>
</ul>
</li>
<li><p>EM Software Development Package (EM SDP) support can be found in <code class="docutils literal notranslate"><span class="pre">board/emsdp</span></code>. It includes the following sub-folders.</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">common</span></code>: EMSK board initialization functions and 1 ms interrupt timer function</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">drivers</span></code>: Various peripheral drivers for various examples</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">configs</span></code>: Different versions of emsdp, and various core configurations for different version</p></li>
</ul>
</li>
<li><p>HS Development Kit (HSDK) board support can be found in <code class="docutils literal notranslate"><span class="pre">board/hsdk</span></code>. It includes the following sub-folders.</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">common</span></code>: HSDK board initialization functions and 1 ms interrupt timer function</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">drivers</span></code>: Various peripheral drivers for various examples</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">configs</span></code>: Support for different board versions (if applicable), and support for different core configurations for each board version (if applicable)</p></li>
</ul>
</li>
<li><p>IoT Development Kit (IoTDK) board support can be found in <code class="docutils literal notranslate"><span class="pre">board/iotdk</span></code>. It includes the following sub-folders.</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">common</span></code>: IoTDK board initialization functions and 1 ms interrupt timer function</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">drivers</span></code>: Various peripheral drivers for various examples</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">configs</span></code>: Support for different board versions (if applicable), and support for different core configurations for each board version (if applicable)</p></li>
</ul>
</li>
<li><p>nSIM virtual board support can be found in <code class="docutils literal notranslate"><span class="pre">board/nsim</span></code>. It includes the following sub-folders.</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">common</span></code>: nSIM virtual board initialization functions and 1 ms interrupt timer function</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">drivers</span></code>: Basic hostlink UART driver for message input and output</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">configs</span></code>: Different versions of nsim, and various core configurations for different version</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MetaWare license is required for nSIM virtual board.</p>
</div>
</div>
<div class="section" id="board-resource-unified-definitions">
<h2>Board Resource Unified Definitions<a class="headerlink" href="#board-resource-unified-definitions" title="Permalink to this headline">¶</a></h2>
<p>The board resource definitions are defined in <code class="docutils literal notranslate"><span class="pre">board.h</span></code>, where the hardware header files of each board are included. The following are the common board resources definitions. For each board, it can implement these definitions according to its own configurations. Through these common definitions, the code re-usability is improved.</p>
<table class="colwidths-auto docutils align-default" id="id1">
<caption><span class="caption-text">Board resource definition</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Resource Definitions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BOARD_CONSOLE_UART_ID</p></td>
<td><p>Console UART ID</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_ADC_IIC_ID</p></td>
<td><p>AD converter IIC interface ID</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_TEMP_SENSOR_IIC_ID</p></td>
<td><p>Temperature sensor IIC interface ID</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_TEMP_IIC_SLVADDR</p></td>
<td><p>Temperature sensor IIC slave address</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_SDCARD_SPI_ID</p></td>
<td><p>SD card SPI interface ID</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_WIFI_SPI_ID</p></td>
<td><p>WiFi SPI interface ID</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_SFLASH_SPI_ID</p></td>
<td><p>SPI flash SPI interface ID</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_SDCARD_SPI_LINE</p></td>
<td><p>SD card SPI interface CS line</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_WIFI_SPI_LINE</p></td>
<td><p>WiFI SPI interface CS line</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_SFLASH_SPI_LINE</p></td>
<td><p>SPI flash SPI interface CS line</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_SYS_TIMER_ID</p></td>
<td><p>System 1 ms interrupt timer ID</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_SYS_TIMER_INTNO</p></td>
<td><p>System 1 ms timer interrupt vector no</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_SYS_TIMER_HZ</p></td>
<td><p>System timer count freq. (1KHz as default)</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_SPI_FREQ</p></td>
<td><p>Board SPI interface common freq.</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_SYS_TIMER_MS_HZ</p></td>
<td><p>Board timer count freq.</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_SYS_TIMER_MS_CONV</p></td>
<td><p>Converter of board to system timer count freq.</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_OS_TIMER_ID</p></td>
<td><p>OS kernel timer ID</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_OS_TIMER_INTNO</p></td>
<td><p>OS kernel timer interrupt no</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_CPU_CLOCK</p></td>
<td><p>CPU clock of the board</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_DEV_CLOCK</p></td>
<td><p>Device clock of the board</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_LED_MASK</p></td>
<td><p>LED Mask, if 8 LED, mask is 0xff</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_LED_CNT</p></td>
<td><p>LED count</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_BTN_MASK</p></td>
<td><p>Button mask</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_BTN_CNT</p></td>
<td><p>Button count</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_SWT_MASK</p></td>
<td><p>Switch mask</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_SWT_CNT</p></td>
<td><p>Switch count</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_ONBOARD_NTSHELL_ID</p></td>
<td><p>Default NtShell ID</p></td>
</tr>
<tr class="row-odd"><td><p>OSP_DELAY_OS_COMPAT_ENABLE</p></td>
<td><p>Delay function is OS compact</p></td>
</tr>
<tr class="row-even"><td><p>OSP_DELAY_OS_COMPAT_DISABLE</p></td>
<td><p>Delay function isn’t OS compact</p></td>
</tr>
<tr class="row-odd"><td><p>WF_IPADDR_1</p></td>
<td><p>WiFi device static IP address 1</p></td>
</tr>
<tr class="row-even"><td><p>WF_IPADDR_2</p></td>
<td><p>WiFi device static IP address 2</p></td>
</tr>
<tr class="row-odd"><td><p>WF_IPADDR_3</p></td>
<td><p>WiFi device static IP address 3</p></td>
</tr>
<tr class="row-even"><td><p>WF_IPADDR_4</p></td>
<td><p>WiFi device static IP address 4</p></td>
</tr>
<tr class="row-odd"><td><p>WF_NETMASK_1</p></td>
<td><p>WiFi device static netmask 1</p></td>
</tr>
<tr class="row-even"><td><p>WF_NETMASK_2</p></td>
<td><p>WiFi device static netmask 2</p></td>
</tr>
<tr class="row-odd"><td><p>WF_NETMASK_3</p></td>
<td><p>WiFi device static netmask 3</p></td>
</tr>
<tr class="row-even"><td><p>WF_NETMASK_4</p></td>
<td><p>WiFi device static netmask 4</p></td>
</tr>
<tr class="row-odd"><td><p>WF_GATEWAY_1</p></td>
<td><p>WiFi device static gateway 1</p></td>
</tr>
<tr class="row-even"><td><p>WF_GATEWAY_2</p></td>
<td><p>WiFi device static gateway 2</p></td>
</tr>
<tr class="row-odd"><td><p>WF_GATEWAY_3</p></td>
<td><p>WiFi device static gateway 3</p></td>
</tr>
<tr class="row-even"><td><p>WF_GATEWAY_4</p></td>
<td><p>WiFi device static gateway 4</p></td>
</tr>
<tr class="row-odd"><td><p>WF_HOTSPOT_IS_OPEN</p></td>
<td><p>Specify whether WiFi hot spot is open or not</p></td>
</tr>
<tr class="row-even"><td><p>WF_IPADDR_DHCP</p></td>
<td><p>Use DHCP to get ip or not</p></td>
</tr>
<tr class="row-odd"><td><p>WF_HOTSPOT_NAME</p></td>
<td><p>WiFi hot spot name</p></td>
</tr>
<tr class="row-even"><td><p>WF_HOTSPOT_PASSWD</p></td>
<td><p>WiFi hot spot password when not open</p></td>
</tr>
<tr class="row-odd"><td><p>WF_ENABLE_MANUAL_SET_MAC</p></td>
<td><p>Enable to set MAC manually or not</p></td>
</tr>
<tr class="row-even"><td><p>WF_MAC_ADDR0</p></td>
<td><p>WiFi MAC address 0 (manual set)</p></td>
</tr>
<tr class="row-odd"><td><p>WF_MAC_ADDR1</p></td>
<td><p>WiFi MAC address 1 (manual set)</p></td>
</tr>
<tr class="row-even"><td><p>WF_MAC_ADDR2</p></td>
<td><p>WiFi MAC address 2 (manual set)</p></td>
</tr>
<tr class="row-odd"><td><p>WF_MAC_ADDR3</p></td>
<td><p>WiFi MAC address 3 (manual set)</p></td>
</tr>
<tr class="row-even"><td><p>WF_MAC_ADDR4</p></td>
<td><p>WiFi MAC address 4 (manual set)</p></td>
</tr>
<tr class="row-odd"><td><p>WF_MAC_ADDR5</p></td>
<td><p>WiFi MAC address 5 (manual set)</p></td>
</tr>
<tr class="row-even"><td><p>BOARD_PMWIFI_0_ID</p></td>
<td><p>Pmod WiFi 0 ID</p></td>
</tr>
<tr class="row-odd"><td><p>BOARD_PMWIFI_ID_MAX</p></td>
<td><p>Max Pmod WiFi ID</p></td>
</tr>
<tr class="row-even"><td><p>OSP_GET_CUR_SYSHZ</p></td>
<td><p>Macro to get current syshz</p></td>
</tr>
<tr class="row-odd"><td><p>OSP_GET_CUR_MS</p></td>
<td><p>Macro to get current ms count</p></td>
</tr>
<tr class="row-even"><td><p>OSP_GET_CUR_US</p></td>
<td><p>Macro to get current us count</p></td>
</tr>
<tr class="row-odd"><td><p>OSP_GET_CUR_HWTICKS</p></td>
<td><p>Macro to get current hardware ticks count</p></td>
</tr>
<tr class="row-even"><td><p>board_init</p></td>
<td><p>Function for common board initialization</p></td>
</tr>
<tr class="row-odd"><td><p>board_timer_update</p></td>
<td><p>Call in period interrupt when using timer interrupt</p></td>
</tr>
<tr class="row-even"><td><p>board_delay_ms</p></td>
<td><p>MS delay for OS support</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, Synopsys.
      <span class="lastupdated">
        Last updated on Sep 13, 2021.
      </span>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>