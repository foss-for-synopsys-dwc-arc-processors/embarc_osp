

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>UART HAL &mdash; embARC OSP Project Documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SDIO HAL" href="sdio.html" />
    <link rel="prev" title="SPI HAL" href="spi.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> embARC
          

          
          </a>

          
            
            
              <div class="version">
                2021.09
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arc/arc.html">ARC Processors</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="device.html">Devices</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="device.html#overview">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="device.html#id1">Device HAL</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="gpio.html">GPIO HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2c.html">I2C HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2s.html">I2S HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi.html">SPI HAL</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">UART HAL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#definitions">Definitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sdio.html">SDIO HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="wnic.html">WNIC HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="trng.html">TRNG HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="pwm_timer.html">PWM_TIMER HAL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="device.html#ip-drivers">IP Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="device.html#driver-instantiation">Driver Instantiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="device.html#external-peripheral-drivers">External Peripheral Drivers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../board/board.html">Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../os/os.html">Operating Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../middleware/middleware.html">Middleware Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lib/library.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../example/example.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/developer_guides.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">Usage Guide FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/contribute.html">Contribute to embARC OSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bsp/bsp.html">embARC BSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/license.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">embARC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="device.html">Devices</a> &raquo;</li>
        
      <li>UART HAL</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="uart-hal">
<span id="device-hal-uart"></span><h1>UART HAL<a class="headerlink" href="#uart-hal" title="Permalink to this headline">¶</a></h1>
<p>The UART HAL definitions is in <code class="docutils literal notranslate"><span class="pre">dev_uart.h</span></code>, it provide interfaces for uart
driver to implement. Here is a diagram for the uart interface.</p>
<img alt="UART HAL" src="../_images/dev_uart_hal.jpg" />
<div class="section" id="definitions">
<h2>Definitions<a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h2>
<dl class="group">
<dt>
<span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT"></span><em><span class="pre">group</span></em> <code class="sig-name descname"><span class="pre">DEVICE_HAL_UART_DEVSTRUCT</span></code></dt>
<dd><p>Contains definitions of uart device interface structure. </p>
<p>This structure will be used in user implemented code, which was called Device Driver Implement Layer for uart to use in implementation code. Application developer should use the UART API provided here to access to UART devices. BSP developer should follow the API definition to implement UART device drivers. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="cpp macro">
<dt id="c.DEV_UART_INFO_SET_EXTRA_OBJECT">
<span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1ga6150a860d3b101329e8521e178e3df38"></span><code class="sig-name descname"><span class="pre">DEV_UART_INFO_SET_EXTRA_OBJECT</span></code><span class="sig-paren">(</span><em><span class="pre">uart_info_ptr</span></em>, <em><span class="pre">extra_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.DEV_UART_INFO_SET_EXTRA_OBJECT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set extra information pointer of uart info </p>
</dd></dl>

<dl class="cpp macro">
<dt id="c.DEV_UART_INFO_GET_EXTRA_OBJECT">
<span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1ga62092f9afef6b9e2e7c6f27623ba87ff"></span><code class="sig-name descname"><span class="pre">DEV_UART_INFO_GET_EXTRA_OBJECT</span></code><span class="sig-paren">(</span><em><span class="pre">uart_info_ptr</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.DEV_UART_INFO_GET_EXTRA_OBJECT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get extra information pointer of uart info </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="cpp type">
<dt id="_CPPv413DEV_UART_INFO">
<span id="_CPPv313DEV_UART_INFO"></span><span id="_CPPv213DEV_UART_INFO"></span><span id="DEV_UART_INFO"></span><span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1gacd54ea1582eb423dd98784e5250815f6"></span><em class="property"><span class="pre">typedef</span> </em><em class="property"><span class="pre">struct</span></em> <a class="reference internal" href="#_CPPv413dev_uart_info" title="dev_uart_info"><span class="pre">dev_uart_info</span></a> <code class="sig-name descname"><span class="pre">DEV_UART_INFO</span></code><a class="headerlink" href="#_CPPv413DEV_UART_INFO" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>UART information struct definition. </p>
<p>informations about uart open count, working status, baudrate, uart registers and ctrl structure, uart dps format </p>
</dd></dl>

<dl class="cpp type">
<dt id="_CPPv417DEV_UART_INFO_PTR">
<span id="_CPPv317DEV_UART_INFO_PTR"></span><span id="_CPPv217DEV_UART_INFO_PTR"></span><span id="DEV_UART_INFO_PTR"></span><span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1ga3502e2afebb3b3e779f9d888326843c5"></span><em class="property"><span class="pre">typedef</span> </em><em class="property"><span class="pre">struct</span></em> <a class="reference internal" href="#_CPPv413dev_uart_info" title="dev_uart_info"><span class="pre">dev_uart_info</span></a> <span class="pre">*</span><code class="sig-name descname"><span class="pre">DEV_UART_INFO_PTR</span></code><a class="headerlink" href="#_CPPv417DEV_UART_INFO_PTR" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt id="_CPPv48DEV_UART">
<span id="_CPPv38DEV_UART"></span><span id="_CPPv28DEV_UART"></span><span id="DEV_UART"></span><span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1gacbaa38d4645f31e9b8b18cdfe6d6c08b"></span><em class="property"><span class="pre">typedef</span> </em><em class="property"><span class="pre">struct</span></em> <a class="reference internal" href="#_CPPv48dev_uart" title="dev_uart"><span class="pre">dev_uart</span></a> <code class="sig-name descname"><span class="pre">DEV_UART</span></code><a class="headerlink" href="#_CPPv48DEV_UART" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>UART device interface definition. </p>
<p>Define uart device interface, like uart information structure, provide functions to open/close/control uart, send/receive data by uart </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All this details are implemented by user in user porting code </p>
</div>
</dd></dl>

<dl class="cpp type">
<dt id="_CPPv412DEV_UART_PTR">
<span id="_CPPv312DEV_UART_PTR"></span><span id="_CPPv212DEV_UART_PTR"></span><span id="DEV_UART_PTR"></span><span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1gaab715d85781589ebc9b2194e25b4a101"></span><em class="property"><span class="pre">typedef</span> </em><em class="property"><span class="pre">struct</span></em> <a class="reference internal" href="#_CPPv48dev_uart" title="dev_uart"><span class="pre">dev_uart</span></a> <span class="pre">*</span><code class="sig-name descname"><span class="pre">DEV_UART_PTR</span></code><a class="headerlink" href="#_CPPv412DEV_UART_PTR" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="cpp var">
<dt id="_CPPv49uart_open">
<span id="_CPPv39uart_open"></span><span id="_CPPv29uart_open"></span><span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1ga00f4f8769a030124d548f65895d2ff87"></span><span class="pre">int32_t</span> <span class="pre">(</span><span class="pre">*</span><code class="sig-name descname"><span class="pre">uart_open</span></code><span class="pre">)</span><span class="sig-paren">(</span><span class="pre">uint32_t</span> <span class="pre">baud</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv49uart_open" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Open uart device</p>
<p>open an uart device with defined baudrate </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>baud</strong> – <strong>[in]</strong> initial baudrate of uart, must &gt; 0 </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>E_OK</strong> – Open successfully without any issues </p></li>
<li><p><strong>E_OPNED</strong> – If device was opened before with different parameters, then just increase the opn_cnt and return E_OPNED </p></li>
<li><p><strong>E_OBJ</strong> – Device object is not valid </p></li>
<li><p><strong>E_PAR</strong> – Parameter is not valid </p></li>
<li><p><strong>E_NOSPT</strong> – Open settings are not supported </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv410uart_close">
<span id="_CPPv310uart_close"></span><span id="_CPPv210uart_close"></span><span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1gae615fe682e9ce8147c0f31b40dfc6438"></span><span class="pre">int32_t</span> <span class="pre">(</span><span class="pre">*</span><code class="sig-name descname"><span class="pre">uart_close</span></code><span class="pre">)</span><span class="sig-paren">(</span><span class="pre">void</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410uart_close" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Close uart device</p>
<p>close an uart device, just decrease the opn_cnt, if opn_cnt equals 0, then close the device </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>E_OK</strong> – Close successfully without any issues(including scenario that device is already closed) </p></li>
<li><p><strong>E_OPNED</strong> – Device is still opened, the device opn_cnt decreased by 1 </p></li>
<li><p><strong>E_OBJ</strong> – Device object is not valid </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv412uart_control">
<span id="_CPPv312uart_control"></span><span id="_CPPv212uart_control"></span><span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1ga7cd1bf12f5d9ca4663980883d01c092a"></span><span class="pre">int32_t</span> <span class="pre">(</span><span class="pre">*</span><code class="sig-name descname"><span class="pre">uart_control</span></code><span class="pre">)</span><span class="sig-paren">(</span><span class="pre">uint32_t</span> <span class="pre">ctrl_cmd</span>, <span class="pre">void</span> <span class="pre">*</span><span class="pre">param</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412uart_control" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Control uart device</p>
<p>control an uart device by ctrl_cmd, with passed param. you can control uart device using predefined uart control commands defined using DEV_SET_SYSCMD (which must be implemented by bsp developer), such as change baudrate, flush output and more. And you can also control uart device using your own specified commands defined using DEV_SET_USRCMD, but these specified commands should be defined in your own uart device driver implementation. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ctrl_cmd</strong> – <strong>[in]</strong> control command, to change or get some thing related to uart </p></li>
<li><p><strong>param</strong> – <strong>[inout]</strong> parameters that maybe argument of the command, or return values of the command </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>E_OK</strong> – Control device successfully </p></li>
<li><p><strong>E_CLSED</strong> – Device is not opened </p></li>
<li><p><strong>E_OBJ</strong> – Device object is not valid or not exists </p></li>
<li><p><strong>E_PAR</strong> – Parameter is not valid for current control command </p></li>
<li><p><strong>E_SYS</strong> – Control device failed, due to hardware issues, such as device is disabled </p></li>
<li><p><strong>E_CTX</strong> – Control device failed, due to different reasons like in transfer state </p></li>
<li><p><strong>E_NOSPT</strong> – Control command is not supported or not valid </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv410uart_write">
<span id="_CPPv310uart_write"></span><span id="_CPPv210uart_write"></span><span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1gadb3f65e65636442af53578c64f2ea2a4"></span><span class="pre">int32_t</span> <span class="pre">(</span><span class="pre">*</span><code class="sig-name descname"><span class="pre">uart_write</span></code><span class="pre">)</span><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">void</span> <span class="pre">*</span><span class="pre">data</span>, <span class="pre">uint32_t</span> <span class="pre">len</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410uart_write" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Send data by uart device(blocked)</p>
<p>send data through uart with defined len(blocked). </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – <strong>[in]</strong> pointer to data need to send by uart, must not be NULL </p></li>
<li><p><strong>len</strong> – <strong>[in]</strong> length of data to be sent, must &gt; 0 </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>&gt;0</strong> – Byte count that was successfully sent for poll method </p></li>
<li><p><strong>E_OBJ</strong> – Device object is not valid or not exists </p></li>
<li><p><strong>E_PAR</strong> – Parameter is not valid </p></li>
<li><p><strong>E_SYS</strong> – Can’t write data to hardware due to hardware issues, such as device is disabled </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv49uart_read">
<span id="_CPPv39uart_read"></span><span id="_CPPv29uart_read"></span><span class="target" id="group__DEVICE__HAL__UART__DEVSTRUCT_1ga8fa470ea11eca6e728e802b64501cbb5"></span><span class="pre">int32_t</span> <span class="pre">(</span><span class="pre">*</span><code class="sig-name descname"><span class="pre">uart_read</span></code><span class="pre">)</span><span class="sig-paren">(</span><span class="pre">void</span> <span class="pre">*</span><span class="pre">data</span>, <span class="pre">uint32_t</span> <span class="pre">len</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv49uart_read" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read data from uart device(blocked)</p>
<p>receive data of defined len through uart(blocked). </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – <strong>[out]</strong> pointer to data need to received by uart, must not be NULL </p></li>
<li><p><strong>len</strong> – <strong>[in]</strong> length of data to be received, must &gt; 0 </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>&gt;0</strong> – Byte count that was successfully received for poll method </p></li>
<li><p><strong>E_OBJ</strong> – Device object is not valid or not exists </p></li>
<li><p><strong>E_PAR</strong> – Parameter is not valid </p></li>
<li><p><strong>E_SYS</strong> – Can’t receive data from hardware due to hardware issues, such as device is disabled </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="cpp struct">
<dt id="_CPPv413dev_uart_info">
<span id="_CPPv313dev_uart_info"></span><span id="_CPPv213dev_uart_info"></span><span id="dev_uart_info"></span><span class="target" id="structdev__uart__info"></span><em class="property"><span class="pre">struct</span> </em><code class="sig-name descname"><span class="pre">dev_uart_info</span></code><a class="headerlink" href="#_CPPv413dev_uart_info" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;dev_uart.h&gt;</em><p>UART information struct definition. </p>
<p>informations about uart open count, working status, baudrate, uart registers and ctrl structure, uart dps format </p>
</dd></dl>

<dl class="cpp struct">
<dt id="_CPPv48dev_uart">
<span id="_CPPv38dev_uart"></span><span id="_CPPv28dev_uart"></span><span id="dev_uart"></span><span class="target" id="structdev__uart"></span><em class="property"><span class="pre">struct</span> </em><code class="sig-name descname"><span class="pre">dev_uart</span></code><a class="headerlink" href="#_CPPv48dev_uart" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;dev_uart.h&gt;</em><p>UART device interface definition. </p>
<p>Define uart device interface, like uart information structure, provide functions to open/close/control uart, send/receive data by uart <div class="admonition note">
<p class="admonition-title">Note</p>
<p>All this details are implemented by user in user porting code </p>
</div>
</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Synopsys.
      <span class="lastupdated">
        Last updated on Sep 24, 2021.
      </span>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>