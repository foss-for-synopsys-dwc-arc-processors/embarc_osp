

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ARC Memory Protection Example &mdash; embARC OSP Project Documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/style_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="ARC SMP Example" href="../multicore/README.html" />
    <link rel="prev" title="ARC Cache Example" href="../cache/README.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> embARC
          

          
          </a>

          
            
            
              <div class="version">
                2019.06
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/introduction.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../arc/arc.html">ARC Processors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../device/device.html">Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../board/board.html">Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../os/os.html">Operating Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../middleware/middleware.html">Middleware Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../lib/library.html">Libraries</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../example.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../../example.html#overview">Overview</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../../example.html">Examples and Demos</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../baremetal_based_example.html">Baremetal examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../freertos/os_based_example.html">OS Based Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../example.html#application-note">Application Note</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer/developer_guides.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/faq.html">Usage Guide FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contribute/contribute.html">Contribute to embARC OSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../changelog/changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../bsp/bsp.html">embARC BSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../license/license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">embARC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../example.html">Examples</a> &raquo;</li>
        
          <li><a href="../../../example.html">Examples and Demos</a> &raquo;</li>
        
          <li><a href="../../baremetal_based_example.html">Baremetal examples</a> &raquo;</li>
        
          <li><a href="../arc_feature.html">ARC Feature Related Examples</a> &raquo;</li>
        
      <li>ARC Memory Protection Example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="arc-memory-protection-example">
<span id="example-arc-feature-memory-protection"></span><h1>ARC Memory Protection Example<a class="headerlink" href="#arc-memory-protection-example" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This example is designed to show how to use DesignWare® ARC® processors Memory Protection Unit(MPU) and the
switch between user mode and kernel mode.</p>
</div></blockquote>
<div class="section" id="detailed-description">
<h3>Detailed Description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt>Extra Required Tools</dt><dd><p>NO</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Extra Required Peripherals</dt><dd><p>NO</p>
</dd>
</dl>
</li>
<li><p>Design Concept</p>
<p>This example is designed to show how to use DesignWare® ARC® processors Memory Protection Unit(MPU) and the
switch between user mode and kernel mode. The violations of read, write and execute are raised
and caught by MPU. The privilege violations are also caught.</p>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hardware support: all DesignWare® ARC® processors based platform with MPU configured</p>
</div>
</div>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<p>Taking EM Starter Kit as example (only em7d configuration has MPU), the commands to run this example are as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> &lt;embarc_root&gt;/example/arc_feature/memory_protection
<span class="gp">$</span> make <span class="nv">BOARD</span><span class="o">=</span>emsk <span class="nv">BD_VER</span><span class="o">=</span><span class="m">22</span> <span class="nv">CUR_CORE</span><span class="o">=</span>arcem7d <span class="nv">TOOLCHAIN</span><span class="o">=</span>gnu run
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you have selected the correct configuration of EM Starter Kit via dip switches and that you have reset the board (button above “R”).</p>
</div>
<div class="section" id="sample-output">
<h3>Sample Output<a class="headerlink" href="#sample-output" title="Permalink to this headline">¶</a></h3>
<p>If you are using the <code class="docutils literal notranslate"><span class="pre">nSIM</span></code>, you will see the following outputs in the CMD window when download is successful.
If you are using the EM Starter Kit, you will see the same msg through UART</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you have chosen correct COM port and set the baud rate to 115200 before you start.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">-----------------------------------------------------------</span>
<span class="go">____                                _ ____</span>
<span class="go">|  _ \ _____      _____ _ __ ___  __| | __ ) _   _</span>
<span class="go">| |_) / _ \ \ /\ / / _ \ &#39;__/ _ \/ _` |  _ \| | | |</span>
<span class="go">|  __/ (_) \ V  V /  __/ | |  __/ (_| | |_) | |_| |</span>
<span class="go">|_|   \___/ \_/\_/ \___|_|  \___|\__,_|____/ \__, |</span>
<span class="go">                                        |___/</span>
<span class="go">                _       _    ____   ____</span>
<span class="go">___ _ __ ___ | |__   / \  |  _ \ / ___|</span>
<span class="go">/ _ \ &#39;_ ` _ \| &#39;_ \ / _ \ | |_) | |</span>
<span class="go">|  __/ | | | | | |_) / ___ \|  _ &lt;| |___</span>
<span class="go">\___|_| |_| |_|_.__/_/   \_\_| \_\\____|</span>
<span class="go">------------------------------------------------------------</span>

<span class="go">embARC Build Time: Dec 26 2019, 15:03:14</span>
<span class="go">Compiler Version: Metaware, 4.2.1 Compatible Clang 6.0.1 (branches/release_60)</span>
<span class="go">raise violation of write to ROM</span>
<span class="go">Memory write protection violation: MPU</span>
<span class="go">raise violation of execute in RAM</span>
<span class="go">Instruction fetch violation: MPU</span>
<span class="go">go to user mode</span>
<span class="go">Memory write protection violation: MPU</span>
<span class="go">Instruction fetch violation: MPU</span>
<span class="go">Memory read protection violation: MPU</span>
<span class="go">Privilege violation</span>
<span class="go">end of program</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Synopsys
      <span class="lastupdated">
        Last updated on Aug 04, 2021.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>